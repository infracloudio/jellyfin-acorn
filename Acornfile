name:        "Jellyfin Acorn"
description: "Running Jellyfin on Acorn"
readme:      "./README.md"
icon:        "./jellyfin.svg"

args: {
  mountdir: "./media"
  storage: "2G"
}

containers: {
    jellyfin: {
    image: "jellyfin/jellyfin"
    ports: publish:"8096:8096/http"
    env: {
        JELLYFIN_PublishedServerUrl: "@{services.jellyfin.endpoint}"
    }
    dirs: {
        "/config": "volume://jellyfinconfig?subpath=config"
        "/cache": "volume://jellyfinconfig?subpath=cache"
        "/media": args.mountdir
        "/media2": "volume://jellyfinmedia?subpath=media"

    }
}
}

volumes: {
    jellyfinconfig: {}
    jellyfinmedia: {
        size: args.storage
    }
}